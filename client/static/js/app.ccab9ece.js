(function(t){function e(e){for(var n,r,c=e[0],s=e[1],l=e[2],u=0,h=[];u<c.length;u++)r=c[u],a[r]&&h.push(a[r][0]),a[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,c=1;c<o.length;c++){var s=o[c];0!==a[s]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=o[0]))}return t}var n={},a={app:0},i=[];function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=s;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("85ec"),a=o.n(n);a.a},"0882":function(t,e,o){},"0d9b":function(t,e,o){},"17f3":function(t,e,o){},"1b3d":function(t,e,o){},"1e07":function(t,e,o){},"2da0":function(t,e,o){"use strict";var n=o("d70d"),a=o.n(n);a.a},3393:function(t,e,o){},"4baa":function(t,e,o){},"50a3":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var n=o("2b0e"),a=o("ce5b"),i=o.n(a),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("Header",{attrs:{"current-page":t.currentPage}}),o("router-view"),o("SnackAdapter")],1)},c=[],s=(o("7f7f"),o("7496")),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("header",{class:"header page-"+t.currentPage},[o("router-link",{attrs:{to:"/"}},[o("h1",[t._v("The App")])]),o("nav",{attrs:{id:"nav"}},[o("router-link",{attrs:{to:"/admin"}},[t._v("\n      Admin\n    ")]),o("router-link",{attrs:{to:"/todo"}},[t._v("\n      Todo\n    ")])],1)],1)},d=[],u={name:"Header",props:{currentPage:{type:String,default:"/"}}},h=u,f=(o("9636"),o("2877")),p=Object(f["a"])(h,l,d,!1,null,"4625b280",null),m=p.exports,v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-snackbar",{attrs:{color:t.snackColor,timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n  "+t._s(t.snackText)+"\n")])},g=[],b=o("2db4"),k={name:"SnackAdapter",components:{VSnackbar:b["a"]},data:function(){return{snackbar:!1,timeout:4e3}},computed:{snackText:function(){return this.$store.state.snack.data.text},snackColor:function(){return this.$store.state.snack.data.color}},watch:{snackText:function(t){var e=this;t.length&&(this.snackbar=!0,setTimeout(function(){e.$store.commit("snack/toggleSnack",{text:""})},this.timeout))}}},y=k,x=Object(f["a"])(y,v,g,!1,null,"47246d98",null),T=x.exports,_={name:"App",components:{VApp:s["a"],Header:m,SnackAdapter:T},computed:{currentPage:function(){return this.$route.name}}},P=_,w=(o("034f"),Object(f["a"])(P,r,c,!1,null,null,null)),$=w.exports,C=o("8c4f"),S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",[o("GridAdapter")],1)},j=[],O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"grid-adapter"},[o("GridContainer",[t._l(t.photos,function(e){return o("GridItem",{key:e.id,scopedSlots:t._u([{key:"item",fn:function(n){return[o("AppImage",{attrs:{id:e.id,"data-src":e.url,description:e.description,signal:n.signal,height:300,hidden:!!t.activeItem.id,active:t.activeItem.id&&e.id===t.activeItem.id},on:{click:t.showPreview}})]}}])})}),o("Lightbox",{attrs:{active:!!t.activeItem.id,item:t.activeItem,"clone-rect":t.cloneRect},on:{close:t.hidePreview}})],2)],1)},A=[],I=(o("7514"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"grid-container"},[t._t("default")],2)}),E=[],D={name:"GridContainer"},R=D,V=(o("9494"),Object(f["a"])(R,I,E,!1,null,"40a0bf56",null)),L=V.exports,U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"item",staticClass:"grid-item",style:t.styleObjItem},[o("div",{ref:"content",staticClass:"grid-item-content",style:t.styleObjContent},[t._t("item",null,{signal:t.getHeight})],2)])},F=[],B={name:"GridItem",data:function(){return{styleObjItem:{},styleObjContent:{}}},methods:{getHeight:function(t){var e=t.clientHeight,o=Math.ceil(e/6);this.styleObjItem={gridRowEnd:"span ".concat(o)},this.styleObjContent={height:"100%"}}}},G=B,H=(o("84c0"),Object(f["a"])(G,U,F,!1,null,"a9051b56",null)),z=H.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"lightbox",class:{active:t.active}},[o("v-btn",{staticClass:"close-btn",attrs:{flat:"",icon:"",absolute:!0},on:{click:function(e){return t.$emit("close")}}},[o("v-icon",{attrs:{small:""}},[t._v("\n      mdi-close\n    ")])],1),o("div",{staticClass:"photo-wrap"},[o("div",{staticClass:"main-wrap"},[o("img",{ref:"imgPreview",staticClass:"img-preview",attrs:{src:t.item.url}}),o("img",{staticClass:"img-clone",style:t.rectStyles,attrs:{src:t.item.url}})])]),o("div",{staticClass:"descr-wrap"},[o("h2",{staticClass:"photo-title"},[t._v("\n      "+t._s(t.photoTitle)+"\n    ")]),o("p",{staticClass:"photo-descr"},[t._v("\n      "+t._s(t.photoDescr)+"\n    ")])])],1)},q=[],J=o("cebc"),W=o("8336"),N=o("132d"),X={name:"Lightbox",components:{VBtn:W["a"],VIcon:N["a"]},props:{item:{type:Object,default:function(){}},active:{type:Boolean,default:function(){return!1}},cloneRect:{type:[DOMRect,Object],default:function(){}}},data:function(){return{loading:!0,computedStyles:{}}},computed:{divRect:function(){if(!this.cloneRect)return!1;var t=this.cloneRect,e=t.height,o=t.width;return{height:"".concat(e,"px"),width:"".concat(o,"px")}},rectStyles:{get:function(){if(!this.cloneRect)return!1;var t=this.cloneRect,e=t.left,o=t.top,n=t.height,a=t.width;return Object(J["a"])({left:"".concat(e,"px"),top:"".concat(o,"px"),height:"".concat(n,"px"),width:"".concat(a,"px")},this.computedStyles)},set:function(t){this.computedStyles=t}},photoTitle:function(){return!!this.item.id&&"Photo ".concat(this.item.id.slice(-4))},photoDescr:function(){return!!this.item.id&&this.item.description}},watch:{active:function(t){var e=this;return t?(setTimeout(function(){var t=e.$refs.imgPreview,o=t.getBoundingClientRect(),n=o.x,a=o.y,i=o.width,r=o.height,c=e.cloneRect,s=c.x,l=c.y,d=c.width,u=c.height,h={x:n+i/2,y:a+r/2},f={x:s+d/2,y:l+u/2},p={x:h.x-f.x,y:h.y-f.y},m="".concat(p.x,"px, ").concat(p.y,"px, 0"),v=t.naturalWidth/t.naturalHeight,g=i/v,b=r/u,k=g/u,y=d*b>window.innerWidth/2,x=y?k:b;e.rectStyles={transform:"translate3d(".concat(m,")\n                      scale(").concat(x,")")}},100),t):(this.rectStyles=null,!1)}}},Y=X,K=(o("70e5"),Object(f["a"])(Y,M,q,!1,null,"1a02503e",null)),Q=K.exports,Z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("img",{staticClass:"AppImage",class:{hidden:t.hidden,active:t.active},style:t.style,attrs:{"data-src":t.lazySrc,"data-srcset":t.lazySrcset,title:t.description},on:{click:t.click}})},tt=[],et=(o("c5f6"),o("5f83")),ot=o.n(et),nt=function t(e,o){return 0!==e.naturalHeight?o():setTimeout(function(){return t(e,o)},100)},at={name:"AppImage",props:{id:{type:String,default:""},backgroundColor:{type:String,default:"#efefef"},height:{type:Number,default:null},lazySrc:{type:String,default:null},lazySrcset:{type:String,default:null},width:{type:Number,default:null},signal:{type:Function,default:null},description:{type:String,default:""},hidden:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},data:function(){return{loading:!0}},computed:{aspectRatio:function(){return this.width&&this.height?this.height/this.width*100:null},style:function(){var t={backgroundColor:this.backgroundColor};this.width&&(t.width="".concat(this.width,"px"));var e=this.loading&&this.aspectRatio;return e&&(t.height=0,t.paddingTop="".concat(this.aspectRatio,"%")),t}},mounted:function(){var t=this,e=function(){t.loading=!1};this.$el.addEventListener("load",e),this.$once("hook:destroyed",function(){t.$el.removeEventListener("load",e)});var o=ot()(this.$el,{loaded:function(e){nt(e,function(){return t.signal(e)})}});o.observe()},methods:{click:function(t){var e=t.currentTarget.getBoundingClientRect();this.$emit("click",this.id,e)}}},it=at,rt=(o("2da0"),Object(f["a"])(it,Z,tt,!1,null,"61ac5a95",null)),ct=rt.exports,st={url:null,description:null},lt={name:"GridAdapter",components:{GridContainer:L,GridItem:z,AppImage:ct,Lightbox:Q},data:function(){return{activeItem:st,cloneRect:{}}},computed:{photos:function(){return this.$store.state.photo.data}},created:function(){this.$store.dispatch("photo/getPhotos")},methods:{showPreview:function(t,e){this.activeItem=this.photos.find(function(e){return e.id===t}),this.cloneRect=e},hidePreview:function(){this.activeItem=st}}},dt=lt,ut=(o("c754"),Object(f["a"])(dt,O,A,!1,null,"01afa170",null)),ht=ut.exports,ft={name:"HomePage",components:{GridAdapter:ht}},pt=ft,mt=Object(f["a"])(pt,S,j,!1,null,null,null),vt=mt.exports,gt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",[o("PhotoAdapter")],1)},bt=[],kt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"photo-adapter"},[o("v-btn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.openDialog()}}},[t._v("\n    Add Photo\n  ")]),o("PhotoForm",{attrs:{dialog:t.dialog,"edited-photo":t.editedPhoto,"dialog-title":t.dialogTitle},on:{sendPhoto:t.sendPhoto,closeDialog:t.closeDialog,deletePhoto:t.deletePhoto}}),o("PhotoTable",{attrs:{photos:t.photos},on:{editPhoto:t.openDialog}})],1)},yt=[],xt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dialog-overlay",class:{active:t.dialog},on:{click:t.closeDialog}},[o("v-dialog",{attrs:{"max-width":"500px","hide-overlay":!0,persistent:!0},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-btn",{staticClass:"delete-btn",class:{visible:t.editItem.id},attrs:{flat:"",icon:"",color:"error",absolute:!0},on:{click:t.deletePhoto}},[o("v-icon",{attrs:{small:""}},[t._v("\n          mdi-delete\n        ")])],1),o("v-card-title",[o("span",{staticClass:"headline"},[t._v(t._s(t.dialogTitle))])]),o("v-card-text",[o("v-text-field",{attrs:{label:"Url"},model:{value:t.editItem.url,callback:function(e){t.$set(t.editItem,"url",e)},expression:"editItem.url"}}),o("v-text-field",{attrs:{label:"Description"},model:{value:t.editItem.description,callback:function(e){t.$set(t.editItem,"description",e)},expression:"editItem.description"}})],1),o("v-card-actions",[o("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.closeDialog}},[t._v("\n          Cancel\n        ")]),o("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.savePhoto}},[t._v("\n          Save\n        ")])],1)],1)],1)],1)},Tt=[],_t=o("169a"),Pt=o("b0af"),wt=o("12b2"),$t=o("99d9"),Ct=o("2677"),St={name:"PhotoForm",components:{VDialog:_t["a"],VCard:Pt["a"],VCardTitle:wt["a"],VCardText:$t["b"],VCardActions:$t["a"],VTextField:Ct["a"],VBtn:W["a"],VIcon:N["a"]},props:{dialog:{type:Boolean,default:function(){return null}},editedPhoto:{type:Object,default:function(){}},dialogTitle:{type:String,default:function(){return""}},sendPhoto:{type:Function,default:function(){return null}}},computed:{editItem:function(){return Object(J["a"])({},this.editedPhoto)}},methods:{savePhoto:function(){var t=Object(J["a"])({},this.editItem);this.$emit("sendPhoto",t),this.closeDialog()},closeDialog:function(){this.$emit("closeDialog")},deletePhoto:function(){var t=confirm("Are you sure? You won't be able to undo this action.");t&&(this.$emit("deletePhoto",this.editItem.id),this.closeDialog())}}},jt=St,Ot=(o("9dbc"),Object(f["a"])(jt,xt,Tt,!1,null,"52932bd8",null)),At=Ot.exports,It=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-data-table",{staticClass:"table",attrs:{headers:t.headers,items:t.photosComp,"rows-per-page-items":[15,30,60],"disable-initial-sort":!0},scopedSlots:t._u([{key:"items",fn:function(e){return[o("tr",{on:{click:function(o){return t.editPhoto(e.item.id)}}},[o("td",[o("span",[o("img",{attrs:{src:e.item.url}})])]),o("td",[t._v(t._s(e.item.description))]),o("td",[t._v(t._s(t.formatDate(e.item.created_date)))]),o("td",[t._v(t._s(e.item.id))])])]}}])})},Et=[],Dt=o("8fea"),Rt={name:"PhotoTable",components:{VDataTable:Dt["a"]},props:{photos:{type:Array,default:function(){return null}}},data:function(){return{headers:[{text:"Url",value:"url"},{text:"Description",value:"description"},{text:"Created",value:"created"},{text:"Id",value:"id"}],photoShit:this.photos}},computed:{photosComp:function(){return this.photos}},methods:{editPhoto:function(t){this.$emit("editPhoto",t)},formatDate:function(t){var e=new Date(t),o={day:"2-digit",month:"2-digit",year:"2-digit",hour:"numeric",minute:"numeric"};return e.toLocaleString("ru-RU",o)}}},Vt=Rt,Lt=(o("9efe"),Object(f["a"])(Vt,It,Et,!1,null,"787baf5d",null)),Ut=Lt.exports,Ft={url:"",description:""},Bt={name:"PhotoAdapter",components:{VBtn:W["a"],PhotoForm:At,PhotoTable:Ut},data:function(){return{dialog:!1,editedPhoto:Ft,dialogTitle:"Add Photo"}},computed:{photos:function(){return this.$store.state.photo.data}},created:function(){this.$store.dispatch("photo/getPhotos")},methods:{sendPhoto:function(t){this.$store.dispatch("photo/setPhoto",t)},openDialog:function(t){var e;t?(e=this.photos.find(function(e){return e.id===t}),this.editedPhoto=e,this.dialogTitle="Edit Photo"):(this.editedPhoto=Ft,this.dialogTitle="Add Photo"),this.dialog=!0},closeDialog:function(){this.dialog=!1},deletePhoto:function(t){this.$store.dispatch("photo/deletePhoto",{id:t})}}},Gt=Bt,Ht=Object(f["a"])(Gt,kt,yt,!1,null,"271d0805",null),zt=Ht.exports,Mt={name:"AdminPage",components:{PhotoAdapter:zt}},qt=Mt,Jt=(o("a8f2"),Object(f["a"])(qt,gt,bt,!1,null,"7504cc70",null)),Wt=Jt.exports,Nt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",[o("TodoAdapter")],1)},Xt=[],Yt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-adapter"},[o("TodoAdd",{on:{"add-todo":t.addTodo}}),o("TodoList",{attrs:{todos:t.todos},on:{"del-todo":t.deleteTodo}})],1)},Kt=[],Qt=o("2f62"),Zt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-add"},[o("form",{on:{submit:t.addTodo}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"title",placeholder:"Add Todo..."},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),o("input",{attrs:{type:"submit",value:"Submit"}})])])},te=[],ee={name:"TodoAdd",data:function(){return{title:""}},methods:{addTodo:function(t){t.preventDefault();var e={title:this.title,completed:!1};this.$emit("add-todo",e),this.title=""}}},oe=ee,ne=(o("ba8d"),Object(f["a"])(oe,Zt,te,!1,null,"61e324b5",null)),ae=ne.exports,ie=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-list"},t._l(t.todos,function(e){return o("TodoItem",{key:e.id,attrs:{todo:e},on:{"del-todo":function(o){return t.$emit("del-todo",e.id)}}})}),1)},re=[],ce=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-item"},[o("input",{attrs:{type:"checkbox"},domProps:{checked:t.todo.completed},on:{change:t.markComplete}}),o("p",{class:{"is-complete":t.todo.completed}},[t._v("\n    "+t._s(t.todo.title)+"\n  ")]),o("button",{staticClass:"del",on:{click:function(e){return t.$emit("del-todo",t.todo.id)}}},[t._v("\n    X\n  ")])])},se=[],le={name:"TodoItem",props:{todo:{type:Object,default:function(){return{}}}},methods:{markComplete:function(){this.todo.completed=!this.todo.completed}}},de=le,ue=(o("aba7"),Object(f["a"])(de,ce,se,!1,null,"1367e257",null)),he=ue.exports,fe={name:"TodoList",components:{TodoItem:he},props:{todos:{type:Array,default:function(){return[]}}}},pe=fe,me=Object(f["a"])(pe,ie,re,!1,null,null,null),ve=me.exports,ge=Object(Qt["a"])("todo"),be=ge.mapActions,ke=ge.mapGetters,ye={name:"TodoAdapter",components:{TodoAdd:ae,TodoList:ve},computed:Object(J["a"])({todos:function(){return this.$store.state.todo.todos}},ke(["niceTodos"])),created:function(){this.$store.dispatch("todo/getTodos")},methods:Object(J["a"])({},be(["addTodo","deleteTodo"]))},xe=ye,Te=(o("8448"),Object(f["a"])(xe,Yt,Kt,!1,null,"95f57908",null)),_e=Te.exports,Pe={name:"TodoPage",components:{TodoAdapter:_e}},we=Pe,$e=(o("b033"),Object(f["a"])(we,Nt,Xt,!1,null,"30e5a678",null)),Ce=$e.exports,Se=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",{staticClass:"auth-page"},[o("AuthAdapter")],1)},je=[],Oe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("AuthForm",{on:{sendLoginData:t.obtainToken,sendSignupData:t.createUser}})},Ae=[],Ie=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-form",{ref:"form",staticClass:"elevation-4",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-text-field",{attrs:{rules:t.nameRules,label:"Login",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),o("v-text-field",{attrs:{rules:t.passwordRules,label:"Password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),o("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),o("v-btn",{attrs:{color:"primary"},on:{click:t.submit}},[t._v("\n    Submit\n  ")]),o("v-btn",{on:{click:t.signup}},[t._v("\n    Sign Up\n  ")])],1)},Ee=[],De=o("4bd4"),Re={name:"AuthForm",components:{VForm:De["a"],VTextField:Ct["a"],VBtn:W["a"]},data:function(){return{valid:!1,username:"",lastname:"",nameRules:[function(t){return!!t||"Login is required"}],password:"",passwordRules:[function(t){return!!t||"Password is required"}],email:""}},methods:{submit:function(){if(this.$refs.form.validate()){var t=this.username,e=this.password;this.$emit("sendLoginData",{username:t,password:e})}},signup:function(){if(this.$refs.form.validate()){var t=this.username,e=this.password,o=this.email;this.$emit("sendSignupData",{username:t,password:e,email:o})}}}},Ve=Re,Le=(o("663b"),Object(f["a"])(Ve,Ie,Ee,!1,null,"447d6062",null)),Ue=Le.exports,Fe={name:"AuthAdapter",components:{AuthForm:Ue},methods:{obtainToken:function(t){var e=this;this.$store.dispatch("auth/obtainToken",t).then(function(t){t&&e.$router.push("admin")})},createUser:function(t){var e=this;this.$store.dispatch("auth/createUser",t).then(function(o){o&&e.obtainToken(t)})}}},Be=Fe,Ge=Object(f["a"])(Be,Oe,Ae,!1,null,"de66c632",null),He=Ge.exports,ze={name:"AuthPage",components:{AuthAdapter:He}},Me=ze,qe=(o("eed0"),Object(f["a"])(Me,Se,je,!1,null,"84a994d2",null)),Je=qe.exports,We=o("75fc"),Ne=o("bc3a"),Xe=o.n(Ne),Ye={namespaced:!0,state:{todos:[]},getters:{niceTodos:function(t){return t.todos.map(function(t){return{id:t.id,title:"nice_".concat(t.title),completed:t.completed}})}},mutations:{getTodos:function(t,e){t.todos=e},addTodo:function(t,e){t.todos=[].concat(Object(We["a"])(t.todos),[e])},deleteTodo:function(t,e){t.todos=e}},actions:{getTodos:function(t){Xe.a.get("https://jsonplaceholder.typicode.com/todos?_limit=5").then(function(e){t.commit("getTodos",e.data)}).catch(function(t){return console.error(t)})},addTodo:function(t,e){var o=e.title,n=e.completed;Xe.a.post("https://jsonplaceholder.typicode.com/todos",{title:o,completed:n}).then(function(e){t.commit("addTodo",e.data)}).catch(function(t){return console.error(t)})},deleteTodo:function(t,e){Xe.a.delete("https://jsonplaceholder.typicode.com/todos/".concat(e)).then(function(){var o=t.state.todos.filter(function(t){return t.id!==e});t.commit("deleteTodo",o)}).catch(function(t){return console.error(t)})}}},Ke=Ye,Qe=o("a4bb"),Ze=o.n(Qe),to=(o("ac6a"),o("20d6"),{namespaced:!0,state:{data:[]},mutations:{getPhotos:function(t,e){t.data=e},setPhoto:function(t,e){if(e.id){var o=t.data.findIndex(function(t){return t.id===e.id});Ze()(t.data[o]).forEach(function(n){t.data[o][n]=e.data[n]})}else t.data=[].concat(Object(We["a"])(t.data),[e.data])},deletePhoto:function(t,e){t.data=e}},actions:{getPhotos:function(t){Xe.a.get("/api/photo/").then(function(e){t.commit("getPhotos",e.data)}).catch(function(t){return console.error(t)})},setPhoto:function(t,e){var o="",n="POST",a={success:{text:"The photo is successfully saved",color:"success"},error:{text:"The photo was not saved. Try again",color:"error"}};e.id&&(o="".concat(e.id,"/"),n="PUT"),Xe()({method:n,url:"/api/photo/".concat(o),data:e}).then(function(o){t.commit("setPhoto",{id:e.id,data:o.data}),t.commit("snack/toggleSnack",a.success,{root:!0})}).catch(function(){t.commit("snack/toggleSnack",a.error,{root:!0})})},deletePhoto:function(t,e){var o=e.id,n={success:{text:"The photo is successfully deleted",color:"success"},error:{text:"The photo was not deleted. Try again",color:"error"}};Xe.a.delete("/api/photo/".concat(o,"/")).then(function(){var e=t.state.data.filter(function(t){return t.id!==o});t.commit("deletePhoto",e),t.commit("snack/toggleSnack",n.success,{root:!0})}).catch(function(){t.commit("snack/toggleSnack",n.error,{root:!0})})}}}),eo=to,oo={namespaced:!0,state:{data:{text:"",color:""}},mutations:{toggleSnack:function(t,e){var o=t.data.color;t.data.text=e.text,t.data.color=e.color||o}}},no=oo,ao=o("0a0d"),io=o.n(ao),ro=o("04e1"),co=o.n(ro),so={namespaced:!0,state:{token:localStorage.getItem("t"),endpoints:{obtainToken:"/api/token/obtain/",refreshToken:"/api/token/refresh/",manageUsers:"/api/users/"}},mutations:{updateToken:function(t,e){t.token=e,Xe.a.defaults.headers.common.Authorization="JWT ".concat(t.token),localStorage.setItem("t",e)},removeToken:function(t){t.token=null,localStorage.removeItem("t")}},actions:{obtainToken:function(t,e){var o=Xe.a.post(t.state.endpoints.obtainToken,e).then(function(e){return t.commit("updateToken",e.data.token),!0}).catch(function(){var e={text:"Couldn't obtain the token",color:"error"};return t.commit("snack/toggleSnack",e,{root:!0}),!1});return o},refreshToken:function(t){var e={token:t.state.token};Xe.a.post(t.state.endpoints.refreshToken,e).then(function(e){t.commit("updateToken",e.data.token)}).catch(function(){var e={text:"Couldn't refresh the token",color:"error"};t.commit("snack/toggleSnack",e,{root:!0})})},inspectToken:function(t){var e=t.state.token;if(e){var o=co()(e),n=o.exp,a=n-io()()/1e3<1800;if(n>io()()/1e3)return a&&t.dispatch("refreshToken"),!0}return!1},createUser:function(t,e){var o={success:{text:"User successfully created",color:"success"},error:{text:"Couldn't create user",color:"error"}},n=Xe.a.post(t.state.endpoints.manageUsers,e).then(function(){return t.commit("snack/toggleSnack",o.success,{root:!0}),!0}).catch(function(){return t.commit("snack/toggleSnack",o.error,{root:!0}),!1});return n}}};Xe.a.defaults.headers.common.Authorization="JWT ".concat(so.state.token);var lo=so;n["default"].use(Qt["b"]);var uo=new Qt["b"].Store({strict:!1,modules:{todo:Ke,photo:eo,snack:no,auth:lo}}),ho=uo;n["default"].use(C["a"]);var fo=new C["a"]({routes:[{path:"/",name:"home",component:vt},{path:"/admin",name:"admin",component:Wt,beforeEnter:function(t,e,o){ho.dispatch("auth/inspectToken").then(function(t){return t?o():o({path:"/login"})})}},{path:"/todo",name:"todo",component:Ce},{path:"/login",name:"login",component:Je,beforeEnter:function(t,e,o){ho.dispatch("auth/inspectToken").then(function(t){return t?o({path:"/admin"}):o()})}},{path:"*",redirect:"/"}],mode:"history"}),po=fo;o("5363"),o("da64"),o("bf40");n["default"].use(i.a,{iconfont:"mdi"}),n["default"].config.productionTip=!1,new n["default"]({store:ho,router:po,render:function(t){return t($)}}).$mount("#app")},"663b":function(t,e,o){"use strict";var n=o("1e07"),a=o.n(n);a.a},"70e5":function(t,e,o){"use strict";var n=o("e6eb"),a=o.n(n);a.a},8448:function(t,e,o){"use strict";var n=o("3393"),a=o.n(n);a.a},"84c0":function(t,e,o){"use strict";var n=o("50a3"),a=o.n(n);a.a},"85ec":function(t,e,o){},"8e11":function(t,e,o){},9494:function(t,e,o){"use strict";var n=o("9838"),a=o.n(n);a.a},9636:function(t,e,o){"use strict";var n=o("17f3"),a=o.n(n);a.a},9838:function(t,e,o){},"9dbc":function(t,e,o){"use strict";var n=o("d443"),a=o.n(n);a.a},"9efe":function(t,e,o){"use strict";var n=o("0882"),a=o.n(n);a.a},a36d:function(t,e,o){},a8f2:function(t,e,o){"use strict";var n=o("1b3d"),a=o.n(n);a.a},aba7:function(t,e,o){"use strict";var n=o("0d9b"),a=o.n(n);a.a},b033:function(t,e,o){"use strict";var n=o("a36d"),a=o.n(n);a.a},ba8d:function(t,e,o){"use strict";var n=o("8e11"),a=o.n(n);a.a},c754:function(t,e,o){"use strict";var n=o("4baa"),a=o.n(n);a.a},cc20:function(t,e,o){},d443:function(t,e,o){},d70d:function(t,e,o){},e6eb:function(t,e,o){},eed0:function(t,e,o){"use strict";var n=o("cc20"),a=o.n(n);a.a}});
//# sourceMappingURL=app.ccab9ece.js.map